<!-- index.html - Costa Hogar A1 con carrusel + frases + buscador + destacados -->
<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Costa Hogar - Inicio</title>
  <link rel="stylesheet" href="css/styles.css">

</head>

<body>

<!-- ================================
     HEADER FIJO
================================ -->
<header class="header">
  <div class="logo" onclick="location.href='index.html'">Costa Hogar</div>

  <nav class="nav">
    <button class="nav-btn" onclick="location.href='comprar.html'">Comprar</button>
    <button class="nav-btn" onclick="location.href='alquiler.html'">Alquilar</button>
    <button class="nav-btn green" onclick="location.href='publicar.html'">Pon tu anuncio</button>
  </nav>

  <div class="header-right">
    <span class="icon" onclick="location.href='favoritos.html'">‚ù§Ô∏è</span>
    <span class="icon" onclick="location.href='chat.html'">üí¨</span>
    <button class="login-btn" onclick="location.href='login.html'">Iniciar sesi√≥n</button>
  </div>
</header>

<!-- ================================
     HERO + CARRUSEL CON FRASES
================================ -->
<section class="hero">

  <div class="hero-slider">
    <div class="slide active" style="background-image:url('https://images.unsplash.com/photo-1507089947368-19c1da9775ae?w=1200');"></div>
    <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1600585154340-be6161a56a0c?w=1200');"></div>
    <div class="slide" style="background-image:url('https://images.unsplash.com/photo-1580587771525-78b9dba3b914?w=1200');"></div>
  </div>

  <div class="hero-content">
    <h1 id="heroFrase">Encuentra tu hogar ideal</h1>

    <div class="search-box">
      <input type="text" id="busqueda" placeholder="Buscar ciudad, zona o direcci√≥n...">
      <button onclick="buscar()">Buscar</button>
    </div>

    <div class="sugerencias" id="sugerencias"></div>
  </div>

</section>

<!-- ================================
     PROPIEDADES DESTACADAS
================================ -->
<section class="destacadas-section">
  <h2>Propiedades destacadas</h2>
  <div class="lista" id="listaDestacadas"></div>
</section>

<!-- ================================
     FOOTER SIMPLE
================================ -->
<footer style="text-align:center;padding:20px;color:#666;">
  ¬© 2025 Costa Hogar. Todos los derechos reservados.
</footer>


<!-- ================================
     JAVASCRIPT
================================ -->
<script>
/* =====================================
   1. CARRUSEL AUTOM√ÅTICO
=====================================*/
let slideIndex = 0;
setInterval(() => {
  const slides = document.querySelectorAll(".slide");
  slides.forEach(s => s.classList.remove("active"));
  slideIndex = (slideIndex + 1) % slides.length;
  slides[slideIndex].classList.add("active");
}, 4500);

/* =====================================
   2. FRASES AUTOM√ÅTICAS
=====================================*/
const frases = [
  "Encuentra tu hogar ideal",
  "Viviendas hechas para ti",
  "Sue√±a en grande, vive mejor",
  "El lugar perfecto te espera"
];

let fraseIndex = 0;
setInterval(() => {
  fraseIndex = (fraseIndex + 1) % frases.length;
  document.getElementById("heroFrase").textContent = frases[fraseIndex];
}, 4000);

/* =====================================
   3. AUTOCOMPLETADO DIRECCIONES
=====================================*/
const input = document.getElementById("busqueda");
const sugerencias = document.getElementById("sugerencias");

input.addEventListener("input", async () => {
  const t = input.value.trim();
  if (t.length < 3) { sugerencias.style.display = "none"; return; }

  const url = `https://geocode.maps.co/search?q=${encodeURIComponent(t)}&api_key=691dbf7ce0ac5786669402bgm8f835e`;
  const res = await fetch(url);
  const data = await res.json();

  sugerencias.innerHTML = "";
  sugerencias.style.display = "block";

  data.slice(0, 6).forEach(s => {
    const d = document.createElement("div");
    d.textContent = s.display_name;
    d.onclick = () => {
      input.value = s.display_name;
      sugerencias.style.display = "none";
    };
    sugerencias.appendChild(d);
  });
});

/* =====================================
   4. LISTADO DESTACADAS
=====================================*/
async function cargarDestacadas() {
  const res = await fetch("/propiedades");
  const propiedades = await res.json();

  const cont = document.getElementById("listaDestacadas");

  cont.innerHTML = "";

  propiedades.slice(0, 6).forEach(p => {
    const img = p.imagenes?.[0] || "https://via.placeholder.com/400x200?text=Sin+imagen";
    cont.innerHTML += `
      <div class="item" onclick="location.href='propiedad.html?id=${p._id}'">
        <img src="${img}">
        <div class="info">
          <div class="precio">${p.precio} ‚Ç¨</div>
          <div class="titulo">${p.titulo}</div>
          <div class="direccion">${p.direccion}</div>
        </div>
      </div>
    `;
  });
}

cargarDestacadas();

/* =====================================
   5. BOT√ìN DE BUSCAR
=====================================*/
function buscar() {
  const q = input.value.trim();
  if (!q) return;

  location.href = `comprar.html?search=${encodeURIComponent(q)}`;
}
</script>

</body>
</html>
